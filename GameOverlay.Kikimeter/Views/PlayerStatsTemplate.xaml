<!-- Template XAML pour l'affichage des statistiques d'un joueur -->
<!-- ⚠️ IMPORTANT: Ce fichier est utilisé EN JEU -->
<!-- 
    SYNCHRONISATION AVEC PlayerStatsTemplatePreview.xaml:
    ====================================================
    1. Modifiez PlayerStatsTemplatePreview.xaml dans Visual Studio Designer
    2. Copiez la structure XAML (Grid, Border, etc.) vers ce fichier
    3. Remplacez les valeurs statiques par des bindings:
       
       TEXTE:
       - "JoueurExemple" → {Binding Name}
       - "7500" → {Binding DamageDealt}
       - "5000" → {Binding DamageTaken}
       - "2500" → {Binding HealingDone}
       - "1500" → {Binding ShieldGiven}
       - "DPT: 1500" → {Binding DamagePerTurn, StringFormat=DPT: {0}}
       
       IMAGES:
       - Image statique (ex: Source="/GameOverlay.Kikimeter;component/Resources/Assets/...") 
         → {Binding PropertyName} si dynamique
         OU gardez le chemin statique si l'image ne change pas
       - {Binding ClassIconImage} pour l'icône de classe (déjà fait)
       
       VALEURS NUMÉRIQUES (ProgressBar):
       - "0.75" → {Binding DamageDealtRatio, Mode=OneWay}
       - "0.5" → {Binding DamageTakenRatio, Mode=OneWay}
       - "0.25" → {Binding HealingDoneRatio, Mode=OneWay}
       - "0.15" → {Binding ShieldGivenRatio, Mode=OneWay}
    
    4. AJOUTEZ au Border principal:
       Width="{Binding DataContext.PlayerModuleWidth, RelativeSource={RelativeSource AncestorType=Window}}"
       HorizontalAlignment="{Binding DataContext.PlayerModuleHorizontalAlignment, RelativeSource={RelativeSource AncestorType=Window}}"
    
    5. POUR AJOUTER DES IMAGES:
       a) Placez l'image dans GameOverlay.Kikimeter/Resources/Assets/
       b) Ajoutez dans GameOverlay.Kikimeter.csproj:
          <Resource Include="Resources\Assets\VotreDossier\**\*.png" />
       c) Utilisez dans XAML:
          Source="/GameOverlay.Kikimeter;component/Resources/Assets/VotreDossier/mon_image.png"
-->

<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    mc:Ignorable="d">
        <!-- Brushes pour les couleurs -->
        <SolidColorBrush x:Key="CyanAccentBrush" Color="#FF00BFFF" />
        <SolidColorBrush x:Key="SectionBackgroundBrush" Color="#20000000" />
        
        <!-- Template pour un joueur -->
        <DataTemplate x:Key="PlayerStatsDataTemplate">
            <Border BorderThickness="0" 
                    Padding="0,0,0,0"
                    Margin="0,0,0,4"
                    CornerRadius="0"
                    VerticalAlignment="Top"
                    HorizontalAlignment="{Binding DataContext.PlayerModuleHorizontalAlignment, RelativeSource={RelativeSource AncestorType=Window}}">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="Width" Value="{Binding DataContext.PlayerModuleWidth, RelativeSource={RelativeSource AncestorType=Window}}"/>
                        <Setter Property="Margin" Value="0,0,0,4"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding DataContext.PlayerModuleWidth, RelativeSource={RelativeSource AncestorType=Window}}" Value="{x:Static sys:Double.NaN}">
                                <Setter Property="Width" Value="Auto"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <StackPanel Margin="0,0,0,0" VerticalAlignment="Top" UseLayoutRounding="True">
                    <!-- Image de croix de déplacement au-dessus de breed_nom_dpt -->
                    <Grid HorizontalAlignment="Left" Margin="0,0,0,-1" Width="25" Height="25">
                        <Image Source="/GameOverlay.Kikimeter;component/Resources/Assets/kikimeter/croix_deplacement.png" 
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Center"
                               Width="25"
                               Height="25"
                               Stretch="Uniform"
                               Opacity="1.0"
                               Cursor="Hand"/>
                    </Grid>
                    
                    <!-- Nom du joueur avec icône de classe -->
                    <Grid x:Name="breed_nom_dpt"
                          Margin="0,0,0,0"
                          HorizontalAlignment="Left"
                          MinWidth="190"
                          MaxWidth="400"
                          Width="Auto">
                        <Grid.Background>
                            <ImageBrush ImageSource="/GameOverlay.Kikimeter;component/Views/EndTurnWidgetBackground.png"/>
                        </Grid.Background>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <!-- Icône de classe (masquée si "En attente...") -->
                        <Border Grid.Column="0"
                                Height="28"
                                Width="28"
                                Margin="2,0,4,0"
                                VerticalAlignment="Center">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Name}" Value="En attente...">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <Image x:Name="breed" Source="{Binding ClassIconImage}"
                                   Stretch="UniformToFill"
                                   SnapsToDevicePixels="True"
                                   RenderOptions.BitmapScalingMode="HighQuality"
                                   RenderOptions.EdgeMode="Aliased"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" 
                                   Height="22" 
                                   Width="22" Margin="1,-7,0,0"/>
                        </Border>
                        <!-- Nom du joueur ou message d'attente -->
                        <TextBlock x:Name="nom_du_joueur"
                                   Grid.Column="1"
                                   FontWeight="Bold" 
                                   FontSize="12"
                                   Foreground="#FFA07C58"
                                   VerticalAlignment="Center" 
                                   Margin="2,0,6,0"
                                   Height="22"
                                   HorizontalAlignment="Stretch"
                                   TextTrimming="CharacterEllipsis">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="{Binding Name}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Name}" Value="En attente...">
                                            <Setter Property="Text" Value="en attente d'un combat...."/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <TextBlock x:Name="DPT" 
                                   Text="{Binding DamagePerTurn, StringFormat=DPT: {0}}" 
                                   FontSize="12"
                                   FontWeight="Bold"
                                   Foreground="#FFFF7979" 
                                   Margin="0,0,10,0"
                                   Grid.Column="2"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Right"/>
                    </Grid>

                    <!-- Grille pour gérer toutes les progress bars -->
                    <Grid x:Name="StatsGrid" Margin="0,-5,0,0" Height="95" Width="234" HorizontalAlignment="Left" VerticalAlignment="Top" ClipToBounds="True" UseLayoutRounding="True">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="35"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Canvas pour les images et les Grid de progress bars - permet le positionnement précis -->
                        <Canvas x:Name="kikimeter" Grid.Column="0" 
                                Grid.ColumnSpan="2"
                                Grid.Row="0"
                                ClipToBounds="False" Margin="-1,0,119,0" Width="235" Height="95">
                            <Canvas.Background>
                                <ImageBrush ImageSource="/GameOverlay.Kikimeter;component/Views/EndTurnWidgetBackground.png"/>
                            </Canvas.Background>

                            <!-- Dégâts infligés - aligné avec l'image dégâts -->
                            <Grid x:Name="progressbar_dégat" Canvas.Left="35"
                                  Canvas.Top="3"
                                  Width="200"
                                  Height="9" 
                                  Margin="-6.5,5,0,0"
                                  Panel.ZIndex="0">
                                <Grid.Background>
                                    <SolidColorBrush Color="#FFA6906F" Opacity="0.53"/>
                                </Grid.Background>
                                <ProgressBar 
                                     Value="{Binding DamageDealtRatio, Mode=OneWay}" 
                                     Maximum="1" 
                                     Foreground="#FFF16000"
                                     Background="#40000000"
                                     CacheMode="BitmapCache"
                                     RenderOptions.BitmapScalingMode="HighQuality"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Center" 
                                     Height="12"
                                     Panel.ZIndex="0">
                                    <ProgressBar.BorderBrush>
                                        <SolidColorBrush Color="#FF7D775B" Opacity="0.535"/>
                                    </ProgressBar.BorderBrush>
                                </ProgressBar>
                                <TextBlock Text="{Binding DamageDealt}" 
                                           FontSize="10"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="White"
                                           FontWeight="Bold"
                                           Panel.ZIndex="1"/>
                                <Image x:Name="overlay_dégat"
                                       Margin="-4,-6,-2.2,-7"
                                       Source="/GameOverlay.Kikimeter;component/Views/xp_progress_bar.png"
                                       Stretch="Fill"
                                       Panel.ZIndex="2"
                                       Tag="progressbar_dégat"/>
                            </Grid>

                            <!-- Dégâts subis - aligné avec l'image dégâts reçus -->
                            <Grid x:Name="progressbar_dégat_reçut" Canvas.Left="35"
                                  Canvas.Top="26"
                                  Width="200"
                                  Height="11" 
                                  Margin="-6.5,4,0,0"
                                  Panel.ZIndex="0">
                                <ProgressBar 
                                     Value="{Binding DamageTakenRatio, Mode=OneWay}" 
                                     Maximum="1"
                                     Height="12" 
                                     Foreground="#FFC01B01"
                                     CacheMode="BitmapCache"
                                     RenderOptions.BitmapScalingMode="HighQuality"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Center"
                                     Panel.ZIndex="0">
                                    <ProgressBar.BorderBrush>
                                        <SolidColorBrush Color="#FFA6906F" Opacity="0.5"/>
                                    </ProgressBar.BorderBrush>
                                    <ProgressBar.Background>
                                        <SolidColorBrush Color="#40000000" Opacity="0.5"/>
                                    </ProgressBar.Background>
                                </ProgressBar>
                                <TextBlock Text="{Binding DamageTaken}" 
                                           FontSize="10"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="White"
                                           FontWeight="Bold"
                                           Panel.ZIndex="1"/>
                                <Image x:Name="overlay_dégat_reçut"
                                       Margin="-10,-5,-2.4,-5"
                                       Source="/GameOverlay.Kikimeter;component/Views/xp_progress_bar.png"
                                       Stretch="Fill"
                                       Panel.ZIndex="2"
                                       Tag="progressbar_dégat_reçut"/>
                            </Grid>

                            <!-- Image Dégâts subis - liée à progressbar_dégat_reçut (en dessous de dégâts) -->
                            <Image x:Name="dégats_reçut"
                                   Source="/GameOverlay.Kikimeter;component/Views/StatSlots11.png"
                                   Width="45"
                                   Height="45"
                                   Canvas.Left="-5"
                                   Canvas.Top="8.5"
                                   RenderTransformOrigin="0.5,0.5" 
                                   Margin="0,7,0,0"
                                   Panel.ZIndex="3"
                                   Tag="progressbar_dégat_reçut"/>

                            <!-- Image Dégâts infligés - liée à progressbar_dégat (au-dessus de dégâts reçus) -->
                            <Image x:Name="dégats"
                                   Source="/GameOverlay.Kikimeter;component/Views/StatSlots08.png"
                                   Width="45"
                                   Height="45"
                                   Canvas.Left="-5"
                                   Canvas.Top="-15.5"
                                   RenderTransformOrigin="0.5,0.5" 
                                   Margin="0,9,0,0"
                                   Panel.ZIndex="4"
                                   Tag="progressbar_dégat"/>

                            <!-- Bouclier donné - aligné avec l'image bouclier -->
                            <Grid x:Name="progressbar_bouclier" Canvas.Left="35"
                                  Canvas.Top="49"
                                  Width="200"
                                  Height="10" 
                                  Margin="-6.5,4,0,0"
                                  Panel.ZIndex="0">
                                <ProgressBar 
                                     Value="{Binding ShieldGivenRatio, Mode=OneWay}" 
                                     Maximum="1"
                                     Height="12" 
                                     Foreground="#FF2CCA85"
                                     Background="#40000000"
                                     CacheMode="BitmapCache"
                                     RenderOptions.BitmapScalingMode="HighQuality"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Center"
                                     Panel.ZIndex="0">
                                    <ProgressBar.BorderBrush>
                                        <SolidColorBrush Color="#FFA6906F" Opacity="0.5"/>
                                    </ProgressBar.BorderBrush>
                                </ProgressBar>
                                <TextBlock Text="{Binding ShieldGiven}" 
                                           FontSize="10"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="White"
                                           FontWeight="Bold"
                                           Panel.ZIndex="1"/>
                                <Image x:Name="overlay_bouclier"
                                       Margin="-4,-6,-2.4,-6"
                                       Source="/GameOverlay.Kikimeter;component/Views/xp_progress_bar.png"
                                       Stretch="Fill"
                                       Panel.ZIndex="2"
                                       Tag="progressbar_bouclier"/>
                            </Grid>

                            <!-- Image Bouclier donné - liée à progressbar_bouclier -->
                            <Image x:Name="bouclier"
                                   Source="/GameOverlay.Kikimeter;component/Views/StatSlots01.png"
                                   Width="45"
                                   Height="45"
                                   Canvas.Left="-5"
                                   Canvas.Top="22.5"
                                   RenderTransformOrigin="0.5,0.5" 
                                   Margin="0,15,0,0"
                                   Panel.ZIndex="3"
                                   Tag="progressbar_bouclier"/>

                            <!-- Soins prodigués - aligné avec l'image soins -->
                            <Grid x:Name="progressbar_soins" Canvas.Left="35"
                                  Canvas.Top="72"
                                  Width="201"
                                  Height="10" 
                                  Margin="-7,3,0,0"
                                  Panel.ZIndex="0">
                                <ProgressBar 
                                     Value="{Binding HealingDoneRatio, Mode=OneWay}" 
                                     Maximum="1"
                                     Height="13" 
                                     Foreground="#FFFB5F5D"
                                     Background="#40000000"
                                     CacheMode="BitmapCache"
                                     RenderOptions.BitmapScalingMode="HighQuality"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Center"
                                     Panel.ZIndex="0">
                                    <ProgressBar.BorderBrush>
                                        <SolidColorBrush Color="#FFB5B385" Opacity="0.5"/>
                                    </ProgressBar.BorderBrush>
                                </ProgressBar>
                                <TextBlock Text="{Binding HealingDone}" 
                                           FontSize="10"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="White"
                                           FontWeight="Bold"
                                           Panel.ZIndex="1"/>
                                <Image x:Name="overlay_soins"
                                       Margin="-4,-6,-2.4,-6"
                                       Source="/GameOverlay.Kikimeter;component/Views/xp_progress_bar.png"
                                       Stretch="Fill"
                                       Panel.ZIndex="2"
                                       Tag="progressbar_soins"/>
                            </Grid>

                            <!-- Image Soins prodigués - liée à progressbar_soins -->
                            <Image x:Name="Soins"
                                   Source="/GameOverlay.Kikimeter;component/Views/StatSlots07.png"
                                   Width="45"
                                   Height="45"
                                   Canvas.Left="-5"
                                   Canvas.Top="32.5"
                                   RenderTransformOrigin="0.5,0.5" 
                                   Margin="0,27,0,0"
                                   Panel.ZIndex="3"
                                   Tag="progressbar_soins"/>
                        </Canvas>
                    </Grid>
                </StackPanel>
            </Border>
        </DataTemplate>
</ResourceDictionary>

